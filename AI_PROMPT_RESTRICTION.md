# AI 助手提示词限制系统

时间: 2024-10-23
状态: 已实现
目的: 限制 AI 只回答美容行业和系统功能相关问题

---

## 问题

原始 AI 助手会回答任何问题（包括数学、科学等无关问题）

示例:
```
用户问: 1+1是多少?
AI 回答: 2
```

---

## 解决方案

添加系统提示词（System Prompt）来限制 AI 的回答范围

---

## 实现细节

### 系统提示词内容

```
你是一个美容院管理系统的AI助手。你的职责是帮助美容院员工管理业务。

【重要限制】
你只能回答以下两类问题：
1. 美容行业相关问题（美容服务、护肤知识、美容产品、行业最佳实践等）
2. 系统功能问题（如何预约、客户管理、员工排班、产品管理、数据分析等）

【禁止回答】
- 数学、科学、历史等与美容行业无关的问题
- 政治、宗教等敏感话题
- 任何其他领域的问题

【回答规则】
- 如果问题不相关，礼貌地拒绝
- 如果是美容相关，提供专业建议
- 如果是系统功能相关，解释使用方法

【可用功能】
- 预约管理
- 客户管理
- 员工排班
- 产品管理
- 数据分析
- 服务定价
- 营销方案
```

### 代码修改

文件: `src/services/aiService.ts`

修改前:
```typescript
const response = await axios.post(GLM_ENDPOINT, {
  model: GLM_MODEL,
  messages: this.conversationHistory,  // 直接发送用户消息
  // ...
});
```

修改后:
```typescript
const systemPrompt = `...系统提示词...`;

const response = await axios.post(GLM_ENDPOINT, {
  model: GLM_MODEL,
  messages: [
    {
      role: 'system',
      content: systemPrompt,
    },
    ...this.conversationHistory,  // 先发送系统提示词，再发送用户消息
  ],
  // ...
});
```

---

## 效果验证

### 测试 1: 美容相关问题 (允许)
```
用户: 如何护理敏感肌肤?
AI 回答: 针对敏感肌肤的护理建议...
结果: ✓ 正常回答
```

### 测试 2: 系统功能问题 (允许)
```
用户: 如何进行客户预约?
AI 回答: 在系统中进行预约的步骤...
结果: ✓ 正常回答
```

### 测试 3: 无关问题 (拒绝)
```
用户: 1+1是多少?
AI 回答: 抱歉，我只能帮助您解决美容院相关问题或系统使用问题。
结果: ✓ 正确拒绝
```

---

## 可回答的问题范围

### 美容行业问题
- 美容服务相关
- 护肤知识
- 美容产品推荐
- 行业最佳实践
- 客户护理建议
- 美容趋势

### 系统功能问题
- 如何预约服务?
- 如何管理客户信息?
- 如何安排员工排班?
- 如何管理产品库存?
- 如何查看数据分析?
- 如何优化定价?
- 如何生成营销文案?

---

## Git 提交记录

```
e3d5a7e - feat: add system prompt to restrict AI to beauty industry and system functionality questions only
```

---

## 后续改进

可以进一步优化提示词:
1. 添加更多美容行业知识库
2. 添加系统功能的详细说明
3. 根据用户反馈持续调整
4. 添加多语言支持

---

## 用户体验改进

现在 AI 助手:
- 只回答相关问题
- 保持专业形象
- 提高系统可信度
- 防止滥用

---

**系统已经过优化，AI 助手现在只会回答美容行业和系统功能相关问题！**
