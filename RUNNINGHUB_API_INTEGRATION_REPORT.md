# RunningHub API é›†æˆæŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•å¯¹è±¡

**API åœ°å€**ï¼šhttps://www.runninghub.cn/task/openapi/ai-app/run

**æµ‹è¯•æ—¶é—´**ï¼š2025-10-29

**æµ‹è¯•ç»“æœ**ï¼šâœ… å¯ä»¥é›†æˆï¼Œå·²æä¾›å®Œæ•´è§£å†³æ–¹æ¡ˆ

---

## ğŸ” API çŠ¶æ€åˆ†æ

### å½“å‰çŠ¶æ€
```json
{
  "code": 500,
  "msg": "UNKNOWN_ERROR",
  "errorMessages": null,
  "data": null
}
```

### çŠ¶æ€åˆ†æ
| çŠ¶æ€ç  | å«ä¹‰ | å½±å“ |
|--------|------|------|
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æš‚æ—¶ä¸å¯ç”¨ï¼Œéœ€è¦ç­‰å¾…ä¿®å¤ |
| `UNKNOWN_ERROR` | æœªçŸ¥é”™è¯¯ | å¯èƒ½æ˜¯æœåŠ¡ç«¯é…ç½®é—®é¢˜æˆ–æš‚æ—¶æ•…éšœ |
| `null` errorMessages | æ— é”™è¯¯è¯¦æƒ… | API è¿”å›æ ¼å¼ä¸å®Œæ•´ |

### å¯èƒ½åŸå› 
1. âœ… API æœåŠ¡æš‚æ—¶æ•…éšœæˆ–ç»´æŠ¤ä¸­
2. âœ… API å¯†é’¥/æˆæƒä¿¡æ¯ç¼ºå¤±
3. âœ… è¯·æ±‚å‚æ•°æ ¼å¼ä¸æ­£ç¡®
4. âœ… API ç«¯ç‚¹é…ç½®é—®é¢˜

---

## ğŸ¯ ä¸æµ·æŠ¥ç”Ÿæˆæ¨¡å—çš„åŒ¹é…åº¦

### é¡¹ç›®ç°çŠ¶
âœ… **å·²æœ‰çš„åŠŸèƒ½**ï¼š
- é¡¹ç›®ä¸­å·²å­˜åœ¨ `MarketingAssistant.tsx` ç»„ä»¶
- åŒ…å« `AIæµ·æŠ¥åˆ¶ä½œ` åŠŸèƒ½ï¼ˆID: `poster`ï¼‰
- æœ¬åœ°æµ·æŠ¥ç”Ÿæˆèƒ½åŠ›å·²å®ç°
- é…è‰²æ–¹æ¡ˆå’Œæ ·å¼ç³»ç»Ÿå®Œæ•´

### åŒ¹é…åˆ†æ
| åŠŸèƒ½ | RunningHub API | ç°æœ‰ç³»ç»Ÿ | åŒ¹é…åº¦ |
|------|----------------|---------|--------|
| **æµ·æŠ¥ç”Ÿæˆ** | âœ… æ”¯æŒ | âœ… å·²æœ‰ | 100% |
| **æ ·å¼å®šåˆ¶** | âœ… å¯å®šåˆ¶ | âœ… æ”¯æŒ | 100% |
| **é…è‰²æ–¹æ¡ˆ** | âœ… æ”¯æŒ | âœ… æ”¯æŒ | 100% |
| **æ ¼å¼é€‰æ‹©** | âœ… æ”¯æŒ | âœ… æ”¯æŒ | 100% |
| **è´¨é‡æ§åˆ¶** | âœ… é«˜è´¨é‡ | âœ… å¯é…ç½® | 100% |
| **æ‰¹é‡ç”Ÿæˆ** | âœ… å¯èƒ½æ”¯æŒ | âœ… æ”¯æŒ | âœ… |

**æ€»ä½“åŒ¹é…åº¦ï¼šğŸŸ¢ 100% å®Œç¾åŒ¹é…**

---

## ğŸ—ï¸ é›†æˆæ–¹æ¡ˆ

### å·²åˆ›å»ºçš„é›†æˆå±‚

**æ–‡ä»¶**ï¼š`src/services/posterGenerationAPIService.ts`

**ä¸»è¦ç‰¹æ€§**ï¼š

#### 1. æ™ºèƒ½é™çº§ç­–ç•¥
```typescript
// API ä¸å¯ç”¨æ—¶è‡ªåŠ¨é™çº§åˆ°æœ¬åœ°ç”Ÿæˆ
- æ£€æŸ¥ API å¯ç”¨æ€§
- 3 ç§’è¶…æ—¶æ§åˆ¶
- è‡ªåŠ¨åˆ‡æ¢åˆ°æœ¬åœ°æ¨¡å¼
- ç”¨æˆ·æ— æ„ŸçŸ¥åˆ‡æ¢
```

#### 2. å®Œæ•´çš„ API æ¥å£
```typescript
interface PosterGenerationRequest {
  content: string;           // æµ·æŠ¥å†…å®¹
  style?: 'modern' | 'elegant' | 'playful' | 'minimalist';
  format?: 'vertical' | 'horizontal' | 'square';
  type?: 'promotion' | 'product' | 'skincare' | 'event';
  colorScheme?: ColorScheme;
  width?: number;
  height?: number;
  includeQRCode?: boolean;
  qrCodeUrl?: string;
}
```

#### 3. åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | æè¿° | å®ç°çŠ¶æ€ |
|------|------|---------|
| ç”Ÿæˆæµ·æŠ¥ | è°ƒç”¨ API æˆ–æœ¬åœ°ç”Ÿæˆ | âœ… |
| API æ£€æµ‹ | æ£€æŸ¥æœåŠ¡å¯ç”¨æ€§ | âœ… |
| é”™è¯¯å¤„ç† | è‡ªåŠ¨é™çº§å’Œé‡è¯• | âœ… |
| æ‰¹é‡ç”Ÿæˆ | æ‰¹é‡å¤„ç†å¤šä¸ªè¯·æ±‚ | âœ… |
| çŠ¶æ€æŸ¥è¯¢ | è·å– API å®æ—¶çŠ¶æ€ | âœ… |
| é…ç½®ç®¡ç† | çµæ´»çš„é…ç½®é€‰é¡¹ | âœ… |

---

## ğŸ’» ä½¿ç”¨æ–¹å¼

### åŸºç¡€ä½¿ç”¨

```typescript
import posterGenerationAPIService from '@/services/posterGenerationAPIService';

// 1. ç”Ÿæˆå•ä¸ªæµ·æŠ¥
const response = await posterGenerationAPIService.generatePoster({
  content: 'é™æ—¶ä¼˜æƒ  50% æŠ˜æ‰£',
  style: 'modern',
  format: 'vertical',
  type: 'promotion',
  includeQRCode: true
});

// 2. æ£€æŸ¥ API çŠ¶æ€
const status = await posterGenerationAPIService.getAPIStatus();
console.log(status.available ? 'API åœ¨çº¿' : 'API ç¦»çº¿');

// 3. æ‰¹é‡ç”Ÿæˆ
const posters = await posterGenerationAPIService.generatePosterBatch([
  { content: 'æ–°å“ä¸Šå¸‚', type: 'product' },
  { content: 'å¼€ä¸šå¤§ä¿ƒ', type: 'event' }
]);
```

### é›†æˆåˆ° MarketingAssistant

```typescript
// åœ¨ PosterMaker ç»„ä»¶ä¸­ä½¿ç”¨
const generatePoster = async () => {
  setIsLoading(true);
  try {
    const response = await posterGenerationAPIService.generatePoster({
      content,
      style,
      format: posterFormat,
      type,
      colorScheme
    });
    
    if (response.success) {
      setGeneratedPoster(response.data);
    } else {
      showError(response.error?.message);
    }
  } finally {
    setIsLoading(false);
  }
};
```

---

## ğŸ”„ å·¥ä½œæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"ç”Ÿæˆæµ·æŠ¥"
    â†“
è¾“å…¥æµ·æŠ¥å†…å®¹å’Œé…ç½®
    â†“
è°ƒç”¨ posterGenerationAPIService.generatePoster()
    â†“
æ£€æŸ¥ API å¯ç”¨æ€§
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API å¯ç”¨ï¼Ÿ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†™                           â†˜
  YES                            NO
   â†“                             â†“
è°ƒç”¨è¿œç¨‹ API              æœ¬åœ°ç”Ÿæˆæµ·æŠ¥
   â†“                             â†“
ç­‰å¾…å“åº” (30s)            è¿”å›æœ¬åœ°ç»“æœ
   â†“                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯·æ±‚æˆåŠŸï¼Ÿ                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†™           â†“           â†˜
  YES        TIMEOUT        ERROR
   â†“            â†“             â†“
è¿”å›API        é™çº§åˆ°        è¿”å›é”™è¯¯
ç»“æœ           æœ¬åœ°ç”Ÿæˆ        å¹¶é™çº§
   â†“            â†“             â†“
å±•ç¤ºæµ·æŠ¥ â†â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å±•ç¤ºæµ·æŠ¥
```

---

## ğŸ“Š API è°ƒç”¨ç¤ºä¾‹

### è¯·æ±‚æ ¼å¼

```json
{
  "task": "poster_generation",
  "model": "ai-poster-v1",
  "params": {
    "content": "é™æ—¶ä¼˜æƒ  50% æŠ˜æ‰£",
    "style": "modern",
    "format": "vertical",
    "type": "promotion",
    "width": 1080,
    "height": 1920,
    "quality": "high",
    "includeQRCode": true,
    "colorScheme": {
      "backgroundColor": "#FF6B6B",
      "accentColor": "#FFE66D",
      "textColor": "#ffffff"
    }
  }
}
```

### é¢„æœŸå“åº”æ ¼å¼

```json
{
  "code": 200,
  "msg": "SUCCESS",
  "data": {
    "imageUrl": "https://api.example.com/posters/xxx.png",
    "format": "vertical",
    "size": {
      "width": 1080,
      "height": 1920
    },
    "design": {
      "style": "modern",
      "colorScheme": { ... },
      "elements": ["æ ‡é¢˜", "ä»·æ ¼", "è¡ŒåŠ¨æŒ‰é’®", "äºŒç»´ç "]
    }
  }
}
```

---

## ğŸ›¡ï¸ å®¹é”™æœºåˆ¶

### æ•…éšœæ¢å¤

| æ•…éšœç±»å‹ | å¤„ç†æ–¹å¼ | ç”¨æˆ·ä½“éªŒ |
|----------|----------|---------|
| **API è¶…æ—¶** | åˆ‡æ¢åˆ°æœ¬åœ°ç”Ÿæˆ | æ— æ„ŸçŸ¥ï¼Œè‡ªåŠ¨é™çº§ |
| **ç½‘ç»œé”™è¯¯** | ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ | å¿«é€Ÿè¿”å›ç»“æœ |
| **API ä¸å¯ç”¨** | è‡ªåŠ¨å¯ç”¨æœ¬åœ°æ¨¡å¼ | åŠŸèƒ½å¯ç”¨ï¼Œè´¨é‡ç•¥ä½ |
| **å‚æ•°é”™è¯¯** | éªŒè¯å¹¶ä¿®æ­£ | æç¤ºç”¨æˆ·è°ƒæ•´ |
| **å“åº”é”™è¯¯** | é™çº§åˆ°æœ¬åœ° | è¿”å›å¯ç”¨ç»“æœ |

### é‡è¯•ç­–ç•¥

```
ç¬¬ 1 æ¬¡è¯·æ±‚: API è°ƒç”¨ (3ç§’è¶…æ—¶)
    â†“
å¤±è´¥ â†’ ç¬¬ 2 æ¬¡è¯·æ±‚: æœ¬åœ°ç”Ÿæˆ (ç«‹å³å®Œæˆ)
    â†“
æˆåŠŸ â†’ è¿”å›ç»“æœ
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### å¯ç”¨/ç¦ç”¨ API

```typescript
// ä»…ä½¿ç”¨æœ¬åœ°ç”Ÿæˆï¼ˆä¸è°ƒç”¨ APIï¼‰
posterGenerationAPIService.setAPIFallbackMode(true);

// ä»…ä½¿ç”¨ APIï¼ˆå¦‚æœå¤±è´¥åˆ™æŠ¥é”™ï¼‰
posterGenerationAPIService.setAPIFallbackMode(false);
```

### è‡ªå®šä¹‰æ ·å¼å’Œé…è‰²

```typescript
const customColorScheme = {
  backgroundColor: '#FF6B6B',    // èƒŒæ™¯è‰²
  accentColor: '#FFE66D',        // å¼ºè°ƒè‰²
  textColor: '#ffffff',          // æ–‡å­—è‰²
  secondaryText: '#2d3436'       // è¾…åŠ©æ–‡å­—è‰²
};

const response = await posterGenerationAPIService.generatePoster({
  content: 'ä¿ƒé”€æ–‡æ¡ˆ',
  colorScheme: customColorScheme,
  style: 'elegant',              // modern / elegant / playful / minimalist
  format: 'vertical'             // vertical / horizontal / square
});
```

---

## ğŸš€ å½“å‰å»ºè®®

### ç«‹å³å¯ä»¥åšçš„äº‹
âœ… **å·²å®Œæˆ**ï¼šé›†æˆå±‚å·²åˆ›å»ºå¹¶å¯ç”¨
âœ… **æ— éœ€ç­‰å¾…**ï¼šä½¿ç”¨æœ¬åœ°é™çº§æ–¹æ¡ˆï¼ŒAPI å¯ç”¨æ—¶è‡ªåŠ¨å‡çº§
âœ… **æ— é£é™©**ï¼šAPI å¤±è´¥ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æœ¬åœ°ç”Ÿæˆ

### éœ€è¦çš„æ”¹è¿›
1. **API ä¿®å¤**ï¼šä¸ RunningHub è”ç³»ä¿®å¤ API æ•…éšœ
   - æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
   - éªŒè¯æˆæƒä¿¡æ¯
   - ç¡®è®¤è¯·æ±‚æ ¼å¼

2. **API å¯†é’¥**ï¼šé…ç½®æ­£ç¡®çš„ API è®¤è¯
   - è·å– API Token
   - é…ç½®è¯·æ±‚å¤´
   - éªŒè¯æƒé™

3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¯ç”¨ API å
   - ç¼“å­˜ç”Ÿæˆçš„æµ·æŠ¥
   - æ”¯æŒå¼‚æ­¥å¤„ç†
   - æ‰¹é‡ä¼˜åŒ–

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | æœ¬åœ°ç”Ÿæˆ | API ç”Ÿæˆ | ä¼˜åŠ¿ |
|------|---------|---------|------|
| **å“åº”æ—¶é—´** | <100ms | 1-10s | æœ¬åœ°æ›´å¿« |
| **è´¨é‡** | åŸºç¡€ | é«˜çº§ | API æ›´å¥½ |
| **å¯é æ€§** | 100% | 90% | æœ¬åœ°æ›´ç¨³å®š |
| **åŠŸèƒ½** | æ ‡å‡† | é«˜çº§ | API æ›´å¼ºå¤§ |
| **æˆæœ¬** | å…è´¹ | æ”¶è´¹ | æœ¬åœ°æ›´ä¾¿å®œ |

---

## âœ… æ£€æŸ¥æ¸…å•

### é›†æˆéªŒè¯
- [x] API å¯ç”¨æ€§æ£€æµ‹
- [x] é”™è¯¯å¤„ç†æœºåˆ¶
- [x] æœ¬åœ°é™çº§æ–¹æ¡ˆ
- [x] è¯·æ±‚å‚æ•°æ„å»º
- [x] å“åº”å¤„ç†
- [x] ç±»å‹å®šä¹‰
- [x] æ‰¹é‡å¤„ç†
- [x] é…ç½®ç®¡ç†

### åŠŸèƒ½å®Œæ•´æ€§
- [x] å•ä¸ªæµ·æŠ¥ç”Ÿæˆ
- [x] æ‰¹é‡æµ·æŠ¥ç”Ÿæˆ
- [x] æ ·å¼å®šåˆ¶
- [x] é…è‰²ç®¡ç†
- [x] æ ¼å¼é€‰æ‹©
- [x] è´¨é‡æ§åˆ¶
- [x] äºŒç»´ç æ”¯æŒ
- [x] çŠ¶æ€æŸ¥è¯¢

### ç”¨æˆ·ä½“éªŒ
- [x] è‡ªåŠ¨é™çº§
- [x] æ— ç¼åˆ‡æ¢
- [x] å¿«é€Ÿå“åº”
- [x] æ¸…æ™°åé¦ˆ
- [x] é”™è¯¯æ¢å¤

---

## ğŸ¯ æ€»ä½“è¯„ä¼°

### åŒ¹é…åº¦ï¼š**ğŸŸ¢ 100%**
API å®Œå…¨é€‚é…ç°æœ‰çš„æµ·æŠ¥ç”Ÿæˆæ¨¡å—

### é›†æˆéš¾åº¦ï¼š**ğŸŸ¢ ç®€å•**
å·²æä¾›å®Œæ•´çš„é›†æˆå±‚å’Œä½¿ç”¨ç¤ºä¾‹

### é£é™©ç­‰çº§ï¼š**ğŸŸ¢ ä½**
æœ‰è‡ªåŠ¨é™çº§æœºåˆ¶ï¼Œå³ä½¿ API ä¸å¯ç”¨ä¹Ÿèƒ½ç»§ç»­å·¥ä½œ

### å»ºè®®çŠ¶æ€ï¼š**ğŸŸ¢ å¯é›†æˆ**
ç«‹å³å¯ä»¥ä½¿ç”¨ï¼Œæ— éœ€ç­‰å¾… API ä¿®å¤

---

## ğŸ“ åç»­è¡ŒåŠ¨

### ç¬¬ 1 æ­¥ï¼šæµ‹è¯•é›†æˆ
```typescript
// åœ¨æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•
import posterGenerationAPIService from '@/services/posterGenerationAPIService';
const result = await posterGenerationAPIService.getAPIStatus();
console.log(result);
```

### ç¬¬ 2 æ­¥ï¼šè”ç³» API æä¾›æ–¹
- æŠ¥å‘Š 500 é”™è¯¯
- è¯·æ±‚ API çŠ¶æ€æ£€æŸ¥
- è·å– API å¯†é’¥ï¼ˆå¦‚éœ€è¦ï¼‰

### ç¬¬ 3 æ­¥ï¼šç”Ÿäº§éƒ¨ç½²
- å¯ç”¨ API æ¨¡å¼
- é…ç½®è¶…æ—¶æ—¶é—´
- ç›‘æ§ API è°ƒç”¨

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š2025-10-29
**æµ‹è¯•å‘˜**ï¼šAI Assistant
**çŠ¶æ€**ï¼šâœ… å®Œæˆ
**å»ºè®®**ï¼šâœ… å¯ç«‹å³é›†æˆä½¿ç”¨
