# 舌苔检测 - 快速测试指南

## 30秒快速体验

### 步骤1：启动系统
```bash
npm run dev
```

### 步骤2：导航到舌苔检测
```
健康助手 → 舌苔检测
```

### 步骤3：上传图片
- 点击 "上传照片"
- 选择任何舌苔照片（或任何图片用于测试）
- 确认图片已显示

### 步骤4：开始诊断
- 点击 "开始中医诊断"
- 等待 1-2 秒完成分析
- 查看诊断结果

---

## 核心功能验证

### 验证1：确定性检验 ✓
```
【测试】
1. 上传同一张图片
2. 获得诊断结果 A
3. 重新上传相同图片
4. 获得诊断结果 B

【验证】
结果 A 和 B 应该完全相同 ✓
（包括舌质颜色、苔质类型、健康评分）
```

### 验证2：缓存性能 ✓
```
【测试】
1. 首次上传图片，记录分析时间 T1
2. 立即重新上传同一图片，记录分析时间 T2

【验证】
T2 应该远小于 T1
（缓存命中，通常 < 100ms）
```

### 验证3：视觉特征提取 ✓
```
【测试】
1. 查看诊断结果界面
2. 点击 "视觉特征分析 (高级)"
3. 展开高级分析面板

【验证】
应该看到：
- 亮度 (0-255)
- 饱和度 (0-100%)
- 舌苔覆盖 (0-100%)
- 纹理复杂度 (0-100)
- 色调范围 (0-360°)
```

### 验证4：置信度显示 ✓
```
【测试】
查看诊断结果上方的 "分析置信度"

【验证】
应该显示：
- 百分比数值（0-100%）
- 绿色/蓝色背景
- "基于视觉特征匹配" 的说明
```

---

## 不同体质识别测试

### 测试用例1：健康舌象
```
特征：淡红色、薄白苔
预期结果：
- 诊断：脾胃健康
- 健康评分：85 分
- 置信度：100%
```

### 测试用例2：湿热体质
```
特征：暗红色、厚腻苔
预期结果：
- 诊断：湿热体质
- 健康评分：55 分
- 置信度：75%+
```

### 测试用例3：阳虚质
```
特征：淡白色、薄腻苔
预期结果：
- 诊断：脾阳虚
- 健康评分：50 分
- 置信度：50%+
```

### 测试用例4：阴虚质
```
特征：红色、少苔或无苔
预期结果：
- 诊断：阴液不足
- 健康评分：45 分
- 置信度：50%+
```

---

## 常见问题测试

### Q: 每次分析结果都不同？
**A**: 检查是否上传的是同一张照片
- 如果是同一张照片，应该完全相同
- 如果想要不同结果，需要上传不同的照片

### Q: 置信度为什么低？
**A**: 可能的原因：
- 照片质量不清晰 → 重新拍摄
- 光线不足 → 在明亮环境下
- 舌头不清晰 → 充分伸出舌头

### Q: 为什么看不到高级特征？
**A**: 
- 在诊断结果界面
- 找到 "视觉特征分析 (高级)" 按钮
- 点击展开查看详细特征

---

## 用户体验检查清单

- [ ] 界面美观、信息清晰
- [ ] 上传照片流程顺畅
- [ ] 分析结果详细完整
- [ ] 调理建议有实用价值
- [ ] 高级特征信息有教育意义
- [ ] 置信度显示增加用户信任
- [ ] 重复分析结果一致
- [ ] 缓存机制加快速度

---

## 构建验证

```bash
# 构建应该成功
npm run build

# 输出示例：
✓ 1544 modules transformed.
✓ built in 2.32s
```

---

## 新增依赖验证

```bash
# 检查 crypto-js 是否已安装
npm list crypto-js

# 输出应该显示：
crypto-js@^4.1.1
```

---

## 相关文件

1. **核心服务**
   - `src/services/tongueCoatingAnalysisService.ts` (370 行)

2. **UI 组件**
   - `src/components/TongueCoatingDetection.tsx` (450 行)

3. **完整文档**
   - `TONGUE_COATING_DETECTION_ENHANCEMENT.md`

---

## 性能基准

| 操作 | 预期时间 | 实际时间 |
|------|---------|---------|
| 首次分析 | 800-1500ms |  |
| 缓存命中 | < 100ms |  |
| 页面加载 | < 2s |  |
| 构建时间 | < 3s |  |

---

## 反馈

如果发现任何问题或有改进建议，请记录：
- 问题描述
- 重现步骤
- 期望行为 vs 实际行为
