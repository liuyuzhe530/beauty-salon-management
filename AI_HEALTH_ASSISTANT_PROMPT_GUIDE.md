# AI 健康助手 - 提示词功能完整指南

## 📋 功能概述

**AI 健康助手**是一个专属于美容院的智能系统，根据用户的年龄、性别、肤质、生活习惯和美容目标，提供个性化的护肤、健康和饮食建议。

### 核心特性
✅ **个性化分析**: 基于用户信息生成定制建议  
✅ **专业简洁**: 简洁、专业、亲切的表达方式  
✅ **无医学诊断**: 避免医学诊断，仅提供建议  
✅ **无产品推销**: 重点放在健康建议，不推销产品  
✅ **分类展示**: 护肤、饮食、生活习惯三大类别  

---

## 🎯 系统提示词（System Prompt）

### 核心指令
```
你是美容院专属健康助手，根据用户输入的年龄、性别、肤质、生活习惯和目标，
提供个性化护肤、健康、饮食建议。

重要规则：
- 回答简洁、专业、亲切
- 避免医学诊断
- 不推销产品
- 基于用户提供的信息给出建议
- 分类呈现建议（护肤、饮食、生活习惯）
- 每条建议控制在一句话内
```

### 提示词的作用
这个系统提示词在每次 AI 调用时都作为基础指令发送，确保 AI 的回应始终符合美容院场景的要求。

---

## 📝 用户信息字段

### 必填（至少选一项）
| 字段 | 类型 | 示例 | 说明 |
|------|------|------|------|
| 年龄 | 数字 | 25 | 用户的年龄，影响建议的针对性 |
| 性别 | 选择 | 女性/男性/其他 | 性别差异会影响建议内容 |
| 肤质 | 选择 | 油性/干性/混合性/敏感性 | 核心参数，影响护肤建议 |

### 可选
| 字段 | 类型 | 示例 | 说明 |
|------|------|------|------|
| 睡眠情况 | 选择 | 睡眠充足/一般/不足 | 影响生活习惯建议 |
| 是否熬夜 | 复选 | 是/否 | 重要的生活方式指标 |
| 饮食偏好 | 文本 | 喜欢吃辣、素食者 | 结合饮食建议 |
| 目标 | 多选 | 美白、祛痘、抗老等 | 针对性提供建议 |

### 目标选项（8个）
```
✓ 美白        - 提亮肤色相关建议
✓ 抗老        - 抗衰老护理建议
✓ 补水        - 保湿补水建议
✓ 祛痘        - 痘肌护理建议
✓ 瘦身        - 塑形饮食建议
✓ 控油        - 控油护理建议
✓ 舒缓        - 敏感肌舒缓建议
✓ 紧致        - 提拉紧致建议
```

---

## 💡 示例场景

### 示例 1：25岁女性油皮，熬夜多，喜欢吃辣，目标祛痘

#### 用户输入（User Prompt）
```
用户信息：
年龄：25岁
性别：女性
肤质：油性
经常熬夜
饮食偏好：喜欢吃辣
目标：祛痘、控油

请基于以上信息提供个性化的护肤、饮食和生活习惯建议。
```

#### AI 输出
```
护肤建议：选用含烟酰胺、水杨酸的清爽型产品，每周1次泥膜清洁毛孔。
饮食建议：避免高油辣食物，多吃富含锌的食物如南瓜子、燕麦。
生活习惯：建议23点前入睡，充足睡眠有助于控油祛痘。
```

---

## 🔧 技术实现

### 文件结构
```
src/
├── services/
│   └── healthAssistantAIService.ts      # AI 服务核心逻辑
├── components/
│   └── HealthAssistantAI.tsx            # UI 组件
└── ...
```

### 核心类：HealthAssistantAIService

#### 方法 1: generatePrompts(profile)
生成系统提示词和用户提示词

```typescript
const prompts = healthAssistantAIService.generatePrompts({
  age: 25,
  gender: 'female',
  skinType: 'oily',
  stayUpLate: true,
  dietPreference: '喜欢吃辣',
  goals: ['祛痘', '控油']
});

// 返回:
// {
//   system: "你是美容院专属健康助手...",
//   user: "用户信息：\n年龄：25岁\n..."
// }
```

#### 方法 2: parseAIResponse(content)
解析 AI 响应，分类呈现

```typescript
const response = healthAssistantAIService.parseAIResponse(aiContent);

// 返回:
// {
//   success: true,
//   advice: "完整建议...",
//   skinCare: "护肤建议",
//   diet: "饮食建议",
//   lifestyle: "生活习惯建议"
// }
```

#### 方法 3: validateProfile(profile)
验证用户信息的完整性

```typescript
const validation = healthAssistantAIService.validateProfile(profile);
// { valid: true } 或 { valid: false, message: "请至少填写一项信息" }
```

---

## 🎨 UI 组件特性

### HealthAssistantAI 组件布局

#### 左侧面板（1/3 宽度）
- **用户信息输入**
  - 年龄输入框
  - 性别下拉选择
  - 肤质下拉选择
  - 睡眠情况选择
  - 熬夜复选框
  - 饮食偏好输入
  - 目标多选按钮（8个）

- **操作按钮**
  - 生成建议（主按钮，紫色）
  - 查看示例（灰色）
  - 清空（轻灰色）

#### 右侧面板（2/3 宽度）
- **综合建议区域**
  - 完整的 AI 建议文本

- **分类建议卡片**
  - 护肤建议（蓝色卡片）
  - 饮食建议（绿色卡片）
  - 生活习惯（橙色卡片）

- **操作按钮**
  - 复制建议

### 响应式设计
```
桌面端 (lg): 左 1/3 + 右 2/3
平板端 (md): 堆叠布局
手机端 (sm): 完全堆叠
```

---

## 🚀 使用流程

### 第 1 步：访问功能
```
1. 登录系统
2. 进入"健康助手"菜单
3. 看到 4 个服务卡片
4. 点击"AI 健康助手"卡片
```

### 第 2 步：填写信息
```
1. 填写左侧的用户信息表单
2. 至少填写一项（年龄、性别或肤质）
3. 可选字段可不填
4. 点击"生成建议"
```

### 第 3 步：查看结果
```
1. AI 处理用户信息（约 1 秒）
2. 右侧显示个性化建议
3. 查看分类的护肤、饮食、生活建议
4. 点击"复制建议"保存到剪贴板
```

### 第 4 步：重新使用
```
1. 点击"清空"按钮重置表单
2. 或点击"查看示例"查看示例输出
3. 继续填写新信息
```

---

## 🔌 API 集成指南

### 集成真实 AI API

#### 步骤 1：获取 API 密钥
支持的 AI 服务：
- OpenAI (GPT-4/3.5)
- 讯飞星火
- 百度文心
- 智谱清言

#### 步骤 2：配置环境变量
```env
# .env.local
VITE_AI_PROVIDER=openai  # 或 xfyun, baidu, zhipu
VITE_AI_API_KEY=your_api_key_here
VITE_AI_MODEL=gpt-3.5-turbo  # 根据供应商调整
```

#### 步骤 3：修改调用逻辑
在 `HealthAssistantAI.tsx` 的 `handleGenerateAdvice` 方法中：

```typescript
const handleGenerateAdvice = async () => {
  // ... 验证代码 ...
  
  try {
    const prompts = healthAssistantAIService.generatePrompts(userProfile);
    
    // 调用真实 API
    const response = await fetch('/api/ai/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        system: prompts.system,
        user: prompts.user,
        model: import.meta.env.VITE_AI_MODEL
      })
    });
    
    const data = await response.json();
    const parsedResponse = healthAssistantAIService.parseAIResponse(data.content);
    setAiResponse(parsedResponse);
  } catch (error) {
    // ... 错误处理 ...
  }
};
```

---

## 📊 建议内容规范

### 护肤建议
```
格式: 护肤建议：[具体建议]

示例:
✓ 护肤建议：选用含烟酰胺的清爽型产品，每周1次深层清洁。
✓ 护肤建议：敏感肌建议使用无香料、无酒精的温和产品。
```

### 饮食建议
```
格式: 饮食建议：[具体建议]

示例:
✓ 饮食建议：多吃富含锌的食物，减少辛辣刺激性食物摄入。
✓ 饮食建议：补充胶原蛋白，多吃鱼类、豆制品。
```

### 生活习惯建议
```
格式: 生活习惯：[具体建议]

示例:
✓ 生活习惯：建议23点前入睡，保证每晚7-8小时睡眠。
✓ 生活习惯：减少日晒，户外活动使用防晒霜。
```

---

## 🎓 最佳实践

### ✅ 推荐做法
1. **完整填写信息** - 提供越多信息，建议越准确
2. **多个目标** - 同时选择多个目标获得综合建议
3. **定期使用** - 定期获取新的个性化建议
4. **反复对比** - 与美容师讨论建议内容
5. **记录建议** - 复制并保存建议便于查阅

### ❌ 避免做法
1. **信息不足** - 至少要填写基本信息
2. **虚假信息** - 确保填写真实信息
3. **只看建议不行动** - 建议需要结合实际使用
4. **替代医疗** - 有明显皮肤问题应咨询医生
5. **忽视过敏** - 有皮肤过敏必须告知美容师

---

## 🔐 隐私和安全

### 数据处理
- ✅ 用户信息不存储到数据库（可选）
- ✅ 每次生成新建议（不保留历史）
- ✅ 可随时清空表单数据
- ✅ 支持本地处理模式

### 免责声明
```
所有建议仅供参考。

系统为美容咨询工具，不能：
- 替代医学诊断
- 治疗皮肤疾病
- 提供医学建议

如有严重皮肤问题，请咨询皮肤医生。
```

---

## 📱 响应式设计

### 桌面端 (lg 以上)
- 3 列布局：左侧输入 + 右侧双列显示
- 最优宽度：1280px+
- 建议卡片显示完整内容

### 平板端 (md - lg)
- 2 列布局：左侧输入缩小 + 右侧堆叠显示
- 最优宽度：768px - 1279px
- 建议卡片显示简化内容

### 手机端 (< md)
- 单列布局：完全堆叠
- 最优宽度：< 768px
- 建议卡片垂直堆叠
- 输入字段全宽

---

## 🎯 实现清单

- ✅ 系统提示词设计（简洁版）
- ✅ 用户信息收集表单
- ✅ 提示词生成逻辑
- ✅ AI 响应解析逻辑
- ✅ 分类建议展示
- ✅ 复制建议功能
- ✅ 示例展示功能
- ✅ 响应式设计
- ✅ 错误处理
- ✅ 使用说明

---

## 📞 技术支持

### 常见问题

**Q: 如何集成真实的 AI API？**  
A: 参考上面的"API 集成指南"部分，修改 `handleGenerateAdvice` 方法。

**Q: 能否保存用户信息？**  
A: 可以，在 `HealthAssistantAI.tsx` 中添加 localStorage 逻辑。

**Q: 支持多语言吗？**  
A: 当前仅支持中文，可通过国际化库扩展。

**Q: 性能如何？**  
A: 本地渲染即时响应，API 调用通常 1-3 秒。

---

## 📈 版本信息

- **版本**: 1.0.0
- **发布日期**: 2024年10月29日
- **状态**: 生产就绪 ✅
- **构建状态**: 成功 (1.94s, 1468 模块)

---

**AI 健康助手已成功集成！准备好为美容院客户提供个性化服务了。** 🎉
