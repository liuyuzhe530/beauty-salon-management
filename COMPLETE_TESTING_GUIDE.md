#  完整功能测试指南

##  测试计划

### 第1部分：基础环境测试
- [x] 后端服务启动
- [x] 前端服务启动
- [x] API连接性测试
- [x] CORS配置测试

### 第2部分：认证测试
- [ ] 用户注册
- [ ] 用户登录
- [ ] Token验证
- [ ] 用户登出
- [ ] 密码修改

### 第3部分：客户管理测试
- [ ] 获取客户列表
- [ ] 创建客户
- [ ] 更新客户
- [ ] 删除客户
- [ ] 搜索客户
- [ ] 按状态筛选
- [ ] 分页测试

### 第4部分：预约管理测试
- [ ] 创建预约
- [ ] 获取预约列表
- [ ] 确认预约
- [ ] 完成预约
- [ ] 取消预约
- [ ] 今天预约查询

### 第5部分：美容师管理测试
- [ ] 创建美容师
- [ ] 获取美容师列表
- [ ] 更新评分
- [ ] 搜索美容师

### 第6部分：产品管理测试
- [ ] 创建产品
- [ ] 获取产品列表
- [ ] 更新库存
- [ ] 搜索产品
- [ ] 获取分类

### 第7部分：错误处理测试
- [ ] 无效Token处理
- [ ] 404处理
- [ ] 网络错误处理
- [ ] 验证错误处理

---

##  环境启动

### 1. 启动后端服务

```bash
# 终端1：进入后端目录
cd backend

# 安装依赖（如果需要）
npm install

# 启动开发服务器
npm run dev
```

**预期输出**:
```
 数据库连接成功
 数据库模型同步成功
 美容院管理系统 API 服务已启动
服务器地址: http://localhost:5000
```

### 2. 启动前端开发服务

```bash
# 终端2：在项目根目录
npm install

# 启动开发服务器
npm run dev
```

**预期输出**:
```
VITE v4.x.x  ready in xxx ms

  Local:   http://localhost:3000/
  press h to show help
```

### 3. 打开浏览器

- 地址栏输入: `http://localhost:3000`
- 打开开发者工具: `F12`
- 切换到 Network 标签

---

##  认证测试

### 测试1：用户注册

**步骤**:
1. 在登录页点击"没有账户？注册"
2. 填写表单:
   - 用户名: `testuser001`
   - 邮箱: `testuser001@example.com`
   - 密码: `TestPass@123`
   - 确认密码: `TestPass@123`
   - 角色: 选择 `admin`
3. 点击"注册"按钮

**预期结果**:
-  显示"注册成功"提示
-  自动跳转到主页
-  页面显示用户信息
-  Network中看到POST /api/auth/register 返回200

**响应示例**:
```json
{
  "success": true,
  "message": "注册成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": "uuid",
      "username": "testuser001",
      "email": "testuser001@example.com",
      "role": "admin"
    }
  }
}
```

### 测试2：用户登录

**步骤**:
1. 点击"登出"返回登录页
2. 选择"登录"标签
3. 填写表单:
   - 用户名: `testuser001`
   - 密码: `TestPass@123`
4. 点击"登录"按钮

**预期结果**:
-  显示"登录成功"提示
-  自动跳转到主页
-  可以看到用户角色和名称
-  Network中看到POST /api/auth/login 返回200

### 测试3：Token验证

**步骤**:
1. 打开浏览器开发者工具
2. 打开 Console 标签
3. 执行命令:
```javascript
const token = localStorage.getItem('authToken');
console.log('Token:', token);
console.log('Token长度:', token?.length);
```

**预期结果**:
-  能看到Token值
-  Token长度超过100字符
-  Token格式为 `eyJhbGc...`

### 测试4：用户登出

**步骤**:
1. 在页面找到并点击"登出"按钮
2. 确认登出操作

**预期结果**:
-  显示"登出成功"提示
-  返回登录页
-  localStorage中的Token被清除
-  Network中看到POST /api/auth/logout 返回200

---

##  客户管理测试

### 测试5：创建客户

**步骤**:
1. 登录系统
2. 导航到"客户管理"
3. 点击"新增客户"按钮
4. 填写表单:
   ```
   姓名: 张三
   电话: 13800138000
   邮箱: zhangsan@example.com
   状态: active
   备注: VIP客户
   ```
5. 点击"保存"

**预期结果**:
-  显示"创建成功"提示
-  客户列表中出现新客户
-  Network中看到POST /api/customers 返回201

**验证**:
```javascript
// 在Console执行
fetch('http://localhost:5000/api/customers', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d.data.length, '个客户'))
```

### 测试6：获取客户列表

**步骤**:
1. 在客户管理页面等待数据加载
2. 观察客户列表

**预期结果**:
-  显示分页信息
-  每一行显示客户基本信息
-  能看到操作按钮（编辑、删除）
-  Network中看到GET /api/customers?page=1&limit=10 返回200

### 测试7：搜索客户

**步骤**:
1. 在客户列表页找到搜索框
2. 输入: `张三`
3. 按Enter或点击搜索按钮

**预期结果**:
-  列表只显示匹配的客户
-  显示搜索结果数量
-  Network中看到GET /api/customers/search?keyword=张三 返回200

### 测试8：更新客户

**步骤**:
1. 在客户列表中找到"张三"
2. 点击"编辑"按钮
3. 修改备注: `VIP客户-高价值`
4. 点击"保存"

**预期结果**:
-  显示"更新成功"提示
-  列表中的数据已更新
-  Network中看到PUT /api/customers/{id} 返回200

### 测试9：删除客户

**步骤**:
1. 在客户列表中找到一个客户
2. 点击"删除"按钮
3. 确认删除

**预期结果**:
-  显示确认对话框
-  点击确认后显示"删除成功"
-  客户从列表中移除
-  Network中看到DELETE /api/customers/{id} 返回200

### 测试10：分页功能

**步骤**:
1. 在客户列表底部找到分页按钮
2. 点击"下一页"

**预期结果**:
-  页码更新
-  显示不同的客户
-  Network中看到新的分页请求
-  "上一页"按钮变为可用

---

##  预约管理测试

### 测试11：创建预约

**步骤**:
1. 导航到"预约管理"或相关菜单
2. 点击"新增预约"
3. 填写表单:
   ```
   客户: 选择"张三"
   美容师: 选择一个美容师
   服务: 美甲
   日期: 明天
   时间: 14:00
   时长: 60分钟
   价格: 199.99
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  预约出现在列表中
-  状态为"pending"
-  Network中看到POST /api/appointments 返回201

### 测试12：确认预约

**步骤**:
1. 在预约列表中找到"pending"状态的预约
2. 点击"确认"或"确认预约"按钮

**预期结果**:
-  状态变为"confirmed"
-  显示"确认成功"
-  Network中看到PUT /api/appointments/{id}/confirm 返回200

### 测试13：完成预约

**步骤**:
1. 在预约列表中找到"confirmed"状态的预约
2. 点击"完成"或"标记为完成"按钮

**预期结果**:
-  状态变为"completed"
-  显示"完成成功"
-  Network中看到PUT /api/appointments/{id}/complete 返回200

### 测试14：取消预约

**步骤**:
1. 创建一个新预约
2. 点击"取消"按钮

**预期结果**:
-  状态变为"cancelled"
-  显示"取消成功"
-  Network中看到PUT /api/appointments/{id}/cancel 返回200

---

##  美容师管理测试

### 测试15：创建美容师

**步骤**:
1. 导航到"美容师管理"
2. 点击"新增美容师"
3. 填写表单:
   ```
   姓名: 李四
   电话: 13800138001
   邮箱: lisi@example.com
   特长: 美甲, 纹眉, 美睫
   工作年限: 5
   状态: active
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  美容师出现在列表中
-  Network中看到POST /api/staff 返回201

### 测试16：更新评分

**步骤**:
1. 在美容师列表中找到一个美容师
2. 点击"评分"或找到评分输入框
3. 输入评分: `4.8`
4. 点击"保存"

**预期结果**:
-  显示"更新成功"
-  列表中显示新的评分
-  Network中看到PUT /api/staff/{id}/rating 返回200

---

## ️ 产品管理测试

### 测试17：创建产品

**步骤**:
1. 导航到"产品管理"或"商城"
2. 点击"新增产品"
3. 填写表单:
   ```
   产品名: 进口护肤品
   分类: 护肤
   描述: 高端进口护肤品
   售价: 299.99
   成本: 150.00
   库存: 50
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  产品出现在列表中
-  Network中看到POST /api/products 返回201

### 测试18：库存管理

**步骤**:
1. 在产品列表中找到产品
2. 点击"库存管理"或类似按钮
3. 进行库存操作:
   - 减少库存5件
   - 或增加库存10件

**预期结果**:
-  库存数值变化
-  Network中看到相应的PUT请求返回200

### 测试19：搜索产品

**步骤**:
1. 在产品列表页找到搜索框
2. 输入: `护肤品`
3. 按Enter搜索

**预期结果**:
-  只显示匹配的产品
-  Network中看到搜索请求返回200

---

## ️ 错误处理测试

### 测试20：无效凭证登录

**步骤**:
1. 返回登录页
2. 输入错误的用户名和密码
3. 点击登录

**预期结果**:
-  显示错误提示信息
-  停留在登录页
-  Network中看到POST返回401或400

### 测试21：网络错误处理

**步骤**:
1. 打开浏览器开发者工具
2. 在Network标签中切换到"Offline"
3. 尝试进行任何操作（如创建客户）

**预期结果**:
-  显示网络错误提示
-  清晰的错误消息
-  UI不崩溃

### 测试22：过期Token处理

**步骤**:
1. 打开Console
2. 手动清除Token:
```javascript
localStorage.removeItem('authToken');
```
3. 尝试进行任何需要认证的操作

**预期结果**:
-  显示"请重新登录"提示
-  返回登录页

---

##  性能测试

### 测试23：大数据加载

**步骤**:
1. 在后端数据库中创建大量客户数据（可选）
2. 加载客户列表
3. 观察加载时间和响应

**预期结果**:
-  列表在2秒内加载完成
-  UI保持响应
-  分页工作正常

### 测试24：并发请求

**步骤**:
1. 快速点击多个操作按钮
2. 观察系统反应

**预期结果**:
-  所有请求都能正常处理
-  数据一致性正确
-  没有重复提交

---

##  测试检查清单

### 基础功能
- [ ] 注册功能正常
- [ ] 登录功能正常
- [ ] 登出功能正常
- [ ] Token管理正确

### 客户管理
- [ ] 创建客户成功
- [ ] 列表显示正确
- [ ] 搜索功能正常
- [ ] 编辑功能正常
- [ ] 删除功能正常
- [ ] 分页功能正常

### 预约管理
- [ ] 创建预约成功
- [ ] 预约状态变更正常
- [ ] 预约列表显示正确

### 美容师管理
- [ ] 创建美容师成功
- [ ] 评分更新正常

### 产品管理
- [ ] 创建产品成功
- [ ] 库存管理正常
- [ ] 搜索功能正常

### 错误处理
- [ ] 错误提示正确显示
- [ ] 网络错误被捕获
- [ ] Token过期被处理

### 用户体验
- [ ] 加载状态显示正确
- [ ] 按钮有加载中状态
- [ ] 提示信息清晰
- [ ] 没有JavaScript错误

---

##  调试技巧

### 查看API请求

在Console执行:
```javascript
// 查看所有API请求
fetch('http://localhost:5000/api', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d))

// 测试特定API
fetch('http://localhost:5000/api/customers', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d))
```

### 查看错误日志

1. 打开开发者工具 Console 标签
2. 设置过滤: `error`
3. 执行操作查看是否有错误

### 检查网络请求

1. 打开 Network 标签
2. 进行操作
3. 查看请求详情:
   - 请求头（Headers）
   - 请求体（Request Payload）
   - 响应（Response）
   - 状态码

---

##  测试报告模板

```
测试日期: ____年____月____日
测试人员: ____________
测试环境: Windows/Mac/Linux
浏览器: Chrome/Firefox/Safari

总体结果:  通过 /  失败

通过的测试: ____ / 24
失败的测试: ____ / 24

发现的问题:
1. ________________
2. ________________
3. ________________

建议改进:
1. ________________
2. ________________
```

---

##  测试完成标准

所有测试完成且满足以下条件：

 所有24个测试用例都通过
 没有JavaScript错误
 所有API调用返回正确的状态码
 用户提示信息清晰正确
 数据加载速度满足要求（<2秒）
 错误处理完善
 没有数据不一致

---

**测试状态**:  准备就绪
**下一步**: 开始执行测试
**预计耗时**: 30-60分钟


##  测试计划

### 第1部分：基础环境测试
- [x] 后端服务启动
- [x] 前端服务启动
- [x] API连接性测试
- [x] CORS配置测试

### 第2部分：认证测试
- [ ] 用户注册
- [ ] 用户登录
- [ ] Token验证
- [ ] 用户登出
- [ ] 密码修改

### 第3部分：客户管理测试
- [ ] 获取客户列表
- [ ] 创建客户
- [ ] 更新客户
- [ ] 删除客户
- [ ] 搜索客户
- [ ] 按状态筛选
- [ ] 分页测试

### 第4部分：预约管理测试
- [ ] 创建预约
- [ ] 获取预约列表
- [ ] 确认预约
- [ ] 完成预约
- [ ] 取消预约
- [ ] 今天预约查询

### 第5部分：美容师管理测试
- [ ] 创建美容师
- [ ] 获取美容师列表
- [ ] 更新评分
- [ ] 搜索美容师

### 第6部分：产品管理测试
- [ ] 创建产品
- [ ] 获取产品列表
- [ ] 更新库存
- [ ] 搜索产品
- [ ] 获取分类

### 第7部分：错误处理测试
- [ ] 无效Token处理
- [ ] 404处理
- [ ] 网络错误处理
- [ ] 验证错误处理

---

##  环境启动

### 1. 启动后端服务

```bash
# 终端1：进入后端目录
cd backend

# 安装依赖（如果需要）
npm install

# 启动开发服务器
npm run dev
```

**预期输出**:
```
 数据库连接成功
 数据库模型同步成功
 美容院管理系统 API 服务已启动
服务器地址: http://localhost:5000
```

### 2. 启动前端开发服务

```bash
# 终端2：在项目根目录
npm install

# 启动开发服务器
npm run dev
```

**预期输出**:
```
VITE v4.x.x  ready in xxx ms

  Local:   http://localhost:3000/
  press h to show help
```

### 3. 打开浏览器

- 地址栏输入: `http://localhost:3000`
- 打开开发者工具: `F12`
- 切换到 Network 标签

---

##  认证测试

### 测试1：用户注册

**步骤**:
1. 在登录页点击"没有账户？注册"
2. 填写表单:
   - 用户名: `testuser001`
   - 邮箱: `testuser001@example.com`
   - 密码: `TestPass@123`
   - 确认密码: `TestPass@123`
   - 角色: 选择 `admin`
3. 点击"注册"按钮

**预期结果**:
-  显示"注册成功"提示
-  自动跳转到主页
-  页面显示用户信息
-  Network中看到POST /api/auth/register 返回200

**响应示例**:
```json
{
  "success": true,
  "message": "注册成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": "uuid",
      "username": "testuser001",
      "email": "testuser001@example.com",
      "role": "admin"
    }
  }
}
```

### 测试2：用户登录

**步骤**:
1. 点击"登出"返回登录页
2. 选择"登录"标签
3. 填写表单:
   - 用户名: `testuser001`
   - 密码: `TestPass@123`
4. 点击"登录"按钮

**预期结果**:
-  显示"登录成功"提示
-  自动跳转到主页
-  可以看到用户角色和名称
-  Network中看到POST /api/auth/login 返回200

### 测试3：Token验证

**步骤**:
1. 打开浏览器开发者工具
2. 打开 Console 标签
3. 执行命令:
```javascript
const token = localStorage.getItem('authToken');
console.log('Token:', token);
console.log('Token长度:', token?.length);
```

**预期结果**:
-  能看到Token值
-  Token长度超过100字符
-  Token格式为 `eyJhbGc...`

### 测试4：用户登出

**步骤**:
1. 在页面找到并点击"登出"按钮
2. 确认登出操作

**预期结果**:
-  显示"登出成功"提示
-  返回登录页
-  localStorage中的Token被清除
-  Network中看到POST /api/auth/logout 返回200

---

##  客户管理测试

### 测试5：创建客户

**步骤**:
1. 登录系统
2. 导航到"客户管理"
3. 点击"新增客户"按钮
4. 填写表单:
   ```
   姓名: 张三
   电话: 13800138000
   邮箱: zhangsan@example.com
   状态: active
   备注: VIP客户
   ```
5. 点击"保存"

**预期结果**:
-  显示"创建成功"提示
-  客户列表中出现新客户
-  Network中看到POST /api/customers 返回201

**验证**:
```javascript
// 在Console执行
fetch('http://localhost:5000/api/customers', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d.data.length, '个客户'))
```

### 测试6：获取客户列表

**步骤**:
1. 在客户管理页面等待数据加载
2. 观察客户列表

**预期结果**:
-  显示分页信息
-  每一行显示客户基本信息
-  能看到操作按钮（编辑、删除）
-  Network中看到GET /api/customers?page=1&limit=10 返回200

### 测试7：搜索客户

**步骤**:
1. 在客户列表页找到搜索框
2. 输入: `张三`
3. 按Enter或点击搜索按钮

**预期结果**:
-  列表只显示匹配的客户
-  显示搜索结果数量
-  Network中看到GET /api/customers/search?keyword=张三 返回200

### 测试8：更新客户

**步骤**:
1. 在客户列表中找到"张三"
2. 点击"编辑"按钮
3. 修改备注: `VIP客户-高价值`
4. 点击"保存"

**预期结果**:
-  显示"更新成功"提示
-  列表中的数据已更新
-  Network中看到PUT /api/customers/{id} 返回200

### 测试9：删除客户

**步骤**:
1. 在客户列表中找到一个客户
2. 点击"删除"按钮
3. 确认删除

**预期结果**:
-  显示确认对话框
-  点击确认后显示"删除成功"
-  客户从列表中移除
-  Network中看到DELETE /api/customers/{id} 返回200

### 测试10：分页功能

**步骤**:
1. 在客户列表底部找到分页按钮
2. 点击"下一页"

**预期结果**:
-  页码更新
-  显示不同的客户
-  Network中看到新的分页请求
-  "上一页"按钮变为可用

---

##  预约管理测试

### 测试11：创建预约

**步骤**:
1. 导航到"预约管理"或相关菜单
2. 点击"新增预约"
3. 填写表单:
   ```
   客户: 选择"张三"
   美容师: 选择一个美容师
   服务: 美甲
   日期: 明天
   时间: 14:00
   时长: 60分钟
   价格: 199.99
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  预约出现在列表中
-  状态为"pending"
-  Network中看到POST /api/appointments 返回201

### 测试12：确认预约

**步骤**:
1. 在预约列表中找到"pending"状态的预约
2. 点击"确认"或"确认预约"按钮

**预期结果**:
-  状态变为"confirmed"
-  显示"确认成功"
-  Network中看到PUT /api/appointments/{id}/confirm 返回200

### 测试13：完成预约

**步骤**:
1. 在预约列表中找到"confirmed"状态的预约
2. 点击"完成"或"标记为完成"按钮

**预期结果**:
-  状态变为"completed"
-  显示"完成成功"
-  Network中看到PUT /api/appointments/{id}/complete 返回200

### 测试14：取消预约

**步骤**:
1. 创建一个新预约
2. 点击"取消"按钮

**预期结果**:
-  状态变为"cancelled"
-  显示"取消成功"
-  Network中看到PUT /api/appointments/{id}/cancel 返回200

---

##  美容师管理测试

### 测试15：创建美容师

**步骤**:
1. 导航到"美容师管理"
2. 点击"新增美容师"
3. 填写表单:
   ```
   姓名: 李四
   电话: 13800138001
   邮箱: lisi@example.com
   特长: 美甲, 纹眉, 美睫
   工作年限: 5
   状态: active
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  美容师出现在列表中
-  Network中看到POST /api/staff 返回201

### 测试16：更新评分

**步骤**:
1. 在美容师列表中找到一个美容师
2. 点击"评分"或找到评分输入框
3. 输入评分: `4.8`
4. 点击"保存"

**预期结果**:
-  显示"更新成功"
-  列表中显示新的评分
-  Network中看到PUT /api/staff/{id}/rating 返回200

---

## ️ 产品管理测试

### 测试17：创建产品

**步骤**:
1. 导航到"产品管理"或"商城"
2. 点击"新增产品"
3. 填写表单:
   ```
   产品名: 进口护肤品
   分类: 护肤
   描述: 高端进口护肤品
   售价: 299.99
   成本: 150.00
   库存: 50
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  产品出现在列表中
-  Network中看到POST /api/products 返回201

### 测试18：库存管理

**步骤**:
1. 在产品列表中找到产品
2. 点击"库存管理"或类似按钮
3. 进行库存操作:
   - 减少库存5件
   - 或增加库存10件

**预期结果**:
-  库存数值变化
-  Network中看到相应的PUT请求返回200

### 测试19：搜索产品

**步骤**:
1. 在产品列表页找到搜索框
2. 输入: `护肤品`
3. 按Enter搜索

**预期结果**:
-  只显示匹配的产品
-  Network中看到搜索请求返回200

---

## ️ 错误处理测试

### 测试20：无效凭证登录

**步骤**:
1. 返回登录页
2. 输入错误的用户名和密码
3. 点击登录

**预期结果**:
-  显示错误提示信息
-  停留在登录页
-  Network中看到POST返回401或400

### 测试21：网络错误处理

**步骤**:
1. 打开浏览器开发者工具
2. 在Network标签中切换到"Offline"
3. 尝试进行任何操作（如创建客户）

**预期结果**:
-  显示网络错误提示
-  清晰的错误消息
-  UI不崩溃

### 测试22：过期Token处理

**步骤**:
1. 打开Console
2. 手动清除Token:
```javascript
localStorage.removeItem('authToken');
```
3. 尝试进行任何需要认证的操作

**预期结果**:
-  显示"请重新登录"提示
-  返回登录页

---

##  性能测试

### 测试23：大数据加载

**步骤**:
1. 在后端数据库中创建大量客户数据（可选）
2. 加载客户列表
3. 观察加载时间和响应

**预期结果**:
-  列表在2秒内加载完成
-  UI保持响应
-  分页工作正常

### 测试24：并发请求

**步骤**:
1. 快速点击多个操作按钮
2. 观察系统反应

**预期结果**:
-  所有请求都能正常处理
-  数据一致性正确
-  没有重复提交

---

##  测试检查清单

### 基础功能
- [ ] 注册功能正常
- [ ] 登录功能正常
- [ ] 登出功能正常
- [ ] Token管理正确

### 客户管理
- [ ] 创建客户成功
- [ ] 列表显示正确
- [ ] 搜索功能正常
- [ ] 编辑功能正常
- [ ] 删除功能正常
- [ ] 分页功能正常

### 预约管理
- [ ] 创建预约成功
- [ ] 预约状态变更正常
- [ ] 预约列表显示正确

### 美容师管理
- [ ] 创建美容师成功
- [ ] 评分更新正常

### 产品管理
- [ ] 创建产品成功
- [ ] 库存管理正常
- [ ] 搜索功能正常

### 错误处理
- [ ] 错误提示正确显示
- [ ] 网络错误被捕获
- [ ] Token过期被处理

### 用户体验
- [ ] 加载状态显示正确
- [ ] 按钮有加载中状态
- [ ] 提示信息清晰
- [ ] 没有JavaScript错误

---

##  调试技巧

### 查看API请求

在Console执行:
```javascript
// 查看所有API请求
fetch('http://localhost:5000/api', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d))

// 测试特定API
fetch('http://localhost:5000/api/customers', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d))
```

### 查看错误日志

1. 打开开发者工具 Console 标签
2. 设置过滤: `error`
3. 执行操作查看是否有错误

### 检查网络请求

1. 打开 Network 标签
2. 进行操作
3. 查看请求详情:
   - 请求头（Headers）
   - 请求体（Request Payload）
   - 响应（Response）
   - 状态码

---

##  测试报告模板

```
测试日期: ____年____月____日
测试人员: ____________
测试环境: Windows/Mac/Linux
浏览器: Chrome/Firefox/Safari

总体结果:  通过 /  失败

通过的测试: ____ / 24
失败的测试: ____ / 24

发现的问题:
1. ________________
2. ________________
3. ________________

建议改进:
1. ________________
2. ________________
```

---

##  测试完成标准

所有测试完成且满足以下条件：

 所有24个测试用例都通过
 没有JavaScript错误
 所有API调用返回正确的状态码
 用户提示信息清晰正确
 数据加载速度满足要求（<2秒）
 错误处理完善
 没有数据不一致

---

**测试状态**:  准备就绪
**下一步**: 开始执行测试
**预计耗时**: 30-60分钟


##  测试计划

### 第1部分：基础环境测试
- [x] 后端服务启动
- [x] 前端服务启动
- [x] API连接性测试
- [x] CORS配置测试

### 第2部分：认证测试
- [ ] 用户注册
- [ ] 用户登录
- [ ] Token验证
- [ ] 用户登出
- [ ] 密码修改

### 第3部分：客户管理测试
- [ ] 获取客户列表
- [ ] 创建客户
- [ ] 更新客户
- [ ] 删除客户
- [ ] 搜索客户
- [ ] 按状态筛选
- [ ] 分页测试

### 第4部分：预约管理测试
- [ ] 创建预约
- [ ] 获取预约列表
- [ ] 确认预约
- [ ] 完成预约
- [ ] 取消预约
- [ ] 今天预约查询

### 第5部分：美容师管理测试
- [ ] 创建美容师
- [ ] 获取美容师列表
- [ ] 更新评分
- [ ] 搜索美容师

### 第6部分：产品管理测试
- [ ] 创建产品
- [ ] 获取产品列表
- [ ] 更新库存
- [ ] 搜索产品
- [ ] 获取分类

### 第7部分：错误处理测试
- [ ] 无效Token处理
- [ ] 404处理
- [ ] 网络错误处理
- [ ] 验证错误处理

---

##  环境启动

### 1. 启动后端服务

```bash
# 终端1：进入后端目录
cd backend

# 安装依赖（如果需要）
npm install

# 启动开发服务器
npm run dev
```

**预期输出**:
```
 数据库连接成功
 数据库模型同步成功
 美容院管理系统 API 服务已启动
服务器地址: http://localhost:5000
```

### 2. 启动前端开发服务

```bash
# 终端2：在项目根目录
npm install

# 启动开发服务器
npm run dev
```

**预期输出**:
```
VITE v4.x.x  ready in xxx ms

  Local:   http://localhost:3000/
  press h to show help
```

### 3. 打开浏览器

- 地址栏输入: `http://localhost:3000`
- 打开开发者工具: `F12`
- 切换到 Network 标签

---

##  认证测试

### 测试1：用户注册

**步骤**:
1. 在登录页点击"没有账户？注册"
2. 填写表单:
   - 用户名: `testuser001`
   - 邮箱: `testuser001@example.com`
   - 密码: `TestPass@123`
   - 确认密码: `TestPass@123`
   - 角色: 选择 `admin`
3. 点击"注册"按钮

**预期结果**:
-  显示"注册成功"提示
-  自动跳转到主页
-  页面显示用户信息
-  Network中看到POST /api/auth/register 返回200

**响应示例**:
```json
{
  "success": true,
  "message": "注册成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": "uuid",
      "username": "testuser001",
      "email": "testuser001@example.com",
      "role": "admin"
    }
  }
}
```

### 测试2：用户登录

**步骤**:
1. 点击"登出"返回登录页
2. 选择"登录"标签
3. 填写表单:
   - 用户名: `testuser001`
   - 密码: `TestPass@123`
4. 点击"登录"按钮

**预期结果**:
-  显示"登录成功"提示
-  自动跳转到主页
-  可以看到用户角色和名称
-  Network中看到POST /api/auth/login 返回200

### 测试3：Token验证

**步骤**:
1. 打开浏览器开发者工具
2. 打开 Console 标签
3. 执行命令:
```javascript
const token = localStorage.getItem('authToken');
console.log('Token:', token);
console.log('Token长度:', token?.length);
```

**预期结果**:
-  能看到Token值
-  Token长度超过100字符
-  Token格式为 `eyJhbGc...`

### 测试4：用户登出

**步骤**:
1. 在页面找到并点击"登出"按钮
2. 确认登出操作

**预期结果**:
-  显示"登出成功"提示
-  返回登录页
-  localStorage中的Token被清除
-  Network中看到POST /api/auth/logout 返回200

---

##  客户管理测试

### 测试5：创建客户

**步骤**:
1. 登录系统
2. 导航到"客户管理"
3. 点击"新增客户"按钮
4. 填写表单:
   ```
   姓名: 张三
   电话: 13800138000
   邮箱: zhangsan@example.com
   状态: active
   备注: VIP客户
   ```
5. 点击"保存"

**预期结果**:
-  显示"创建成功"提示
-  客户列表中出现新客户
-  Network中看到POST /api/customers 返回201

**验证**:
```javascript
// 在Console执行
fetch('http://localhost:5000/api/customers', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d.data.length, '个客户'))
```

### 测试6：获取客户列表

**步骤**:
1. 在客户管理页面等待数据加载
2. 观察客户列表

**预期结果**:
-  显示分页信息
-  每一行显示客户基本信息
-  能看到操作按钮（编辑、删除）
-  Network中看到GET /api/customers?page=1&limit=10 返回200

### 测试7：搜索客户

**步骤**:
1. 在客户列表页找到搜索框
2. 输入: `张三`
3. 按Enter或点击搜索按钮

**预期结果**:
-  列表只显示匹配的客户
-  显示搜索结果数量
-  Network中看到GET /api/customers/search?keyword=张三 返回200

### 测试8：更新客户

**步骤**:
1. 在客户列表中找到"张三"
2. 点击"编辑"按钮
3. 修改备注: `VIP客户-高价值`
4. 点击"保存"

**预期结果**:
-  显示"更新成功"提示
-  列表中的数据已更新
-  Network中看到PUT /api/customers/{id} 返回200

### 测试9：删除客户

**步骤**:
1. 在客户列表中找到一个客户
2. 点击"删除"按钮
3. 确认删除

**预期结果**:
-  显示确认对话框
-  点击确认后显示"删除成功"
-  客户从列表中移除
-  Network中看到DELETE /api/customers/{id} 返回200

### 测试10：分页功能

**步骤**:
1. 在客户列表底部找到分页按钮
2. 点击"下一页"

**预期结果**:
-  页码更新
-  显示不同的客户
-  Network中看到新的分页请求
-  "上一页"按钮变为可用

---

##  预约管理测试

### 测试11：创建预约

**步骤**:
1. 导航到"预约管理"或相关菜单
2. 点击"新增预约"
3. 填写表单:
   ```
   客户: 选择"张三"
   美容师: 选择一个美容师
   服务: 美甲
   日期: 明天
   时间: 14:00
   时长: 60分钟
   价格: 199.99
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  预约出现在列表中
-  状态为"pending"
-  Network中看到POST /api/appointments 返回201

### 测试12：确认预约

**步骤**:
1. 在预约列表中找到"pending"状态的预约
2. 点击"确认"或"确认预约"按钮

**预期结果**:
-  状态变为"confirmed"
-  显示"确认成功"
-  Network中看到PUT /api/appointments/{id}/confirm 返回200

### 测试13：完成预约

**步骤**:
1. 在预约列表中找到"confirmed"状态的预约
2. 点击"完成"或"标记为完成"按钮

**预期结果**:
-  状态变为"completed"
-  显示"完成成功"
-  Network中看到PUT /api/appointments/{id}/complete 返回200

### 测试14：取消预约

**步骤**:
1. 创建一个新预约
2. 点击"取消"按钮

**预期结果**:
-  状态变为"cancelled"
-  显示"取消成功"
-  Network中看到PUT /api/appointments/{id}/cancel 返回200

---

##  美容师管理测试

### 测试15：创建美容师

**步骤**:
1. 导航到"美容师管理"
2. 点击"新增美容师"
3. 填写表单:
   ```
   姓名: 李四
   电话: 13800138001
   邮箱: lisi@example.com
   特长: 美甲, 纹眉, 美睫
   工作年限: 5
   状态: active
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  美容师出现在列表中
-  Network中看到POST /api/staff 返回201

### 测试16：更新评分

**步骤**:
1. 在美容师列表中找到一个美容师
2. 点击"评分"或找到评分输入框
3. 输入评分: `4.8`
4. 点击"保存"

**预期结果**:
-  显示"更新成功"
-  列表中显示新的评分
-  Network中看到PUT /api/staff/{id}/rating 返回200

---

## ️ 产品管理测试

### 测试17：创建产品

**步骤**:
1. 导航到"产品管理"或"商城"
2. 点击"新增产品"
3. 填写表单:
   ```
   产品名: 进口护肤品
   分类: 护肤
   描述: 高端进口护肤品
   售价: 299.99
   成本: 150.00
   库存: 50
   ```
4. 点击"保存"

**预期结果**:
-  显示"创建成功"
-  产品出现在列表中
-  Network中看到POST /api/products 返回201

### 测试18：库存管理

**步骤**:
1. 在产品列表中找到产品
2. 点击"库存管理"或类似按钮
3. 进行库存操作:
   - 减少库存5件
   - 或增加库存10件

**预期结果**:
-  库存数值变化
-  Network中看到相应的PUT请求返回200

### 测试19：搜索产品

**步骤**:
1. 在产品列表页找到搜索框
2. 输入: `护肤品`
3. 按Enter搜索

**预期结果**:
-  只显示匹配的产品
-  Network中看到搜索请求返回200

---

## ️ 错误处理测试

### 测试20：无效凭证登录

**步骤**:
1. 返回登录页
2. 输入错误的用户名和密码
3. 点击登录

**预期结果**:
-  显示错误提示信息
-  停留在登录页
-  Network中看到POST返回401或400

### 测试21：网络错误处理

**步骤**:
1. 打开浏览器开发者工具
2. 在Network标签中切换到"Offline"
3. 尝试进行任何操作（如创建客户）

**预期结果**:
-  显示网络错误提示
-  清晰的错误消息
-  UI不崩溃

### 测试22：过期Token处理

**步骤**:
1. 打开Console
2. 手动清除Token:
```javascript
localStorage.removeItem('authToken');
```
3. 尝试进行任何需要认证的操作

**预期结果**:
-  显示"请重新登录"提示
-  返回登录页

---

##  性能测试

### 测试23：大数据加载

**步骤**:
1. 在后端数据库中创建大量客户数据（可选）
2. 加载客户列表
3. 观察加载时间和响应

**预期结果**:
-  列表在2秒内加载完成
-  UI保持响应
-  分页工作正常

### 测试24：并发请求

**步骤**:
1. 快速点击多个操作按钮
2. 观察系统反应

**预期结果**:
-  所有请求都能正常处理
-  数据一致性正确
-  没有重复提交

---

##  测试检查清单

### 基础功能
- [ ] 注册功能正常
- [ ] 登录功能正常
- [ ] 登出功能正常
- [ ] Token管理正确

### 客户管理
- [ ] 创建客户成功
- [ ] 列表显示正确
- [ ] 搜索功能正常
- [ ] 编辑功能正常
- [ ] 删除功能正常
- [ ] 分页功能正常

### 预约管理
- [ ] 创建预约成功
- [ ] 预约状态变更正常
- [ ] 预约列表显示正确

### 美容师管理
- [ ] 创建美容师成功
- [ ] 评分更新正常

### 产品管理
- [ ] 创建产品成功
- [ ] 库存管理正常
- [ ] 搜索功能正常

### 错误处理
- [ ] 错误提示正确显示
- [ ] 网络错误被捕获
- [ ] Token过期被处理

### 用户体验
- [ ] 加载状态显示正确
- [ ] 按钮有加载中状态
- [ ] 提示信息清晰
- [ ] 没有JavaScript错误

---

##  调试技巧

### 查看API请求

在Console执行:
```javascript
// 查看所有API请求
fetch('http://localhost:5000/api', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d))

// 测试特定API
fetch('http://localhost:5000/api/customers', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`
  }
}).then(r => r.json()).then(d => console.log(d))
```

### 查看错误日志

1. 打开开发者工具 Console 标签
2. 设置过滤: `error`
3. 执行操作查看是否有错误

### 检查网络请求

1. 打开 Network 标签
2. 进行操作
3. 查看请求详情:
   - 请求头（Headers）
   - 请求体（Request Payload）
   - 响应（Response）
   - 状态码

---

##  测试报告模板

```
测试日期: ____年____月____日
测试人员: ____________
测试环境: Windows/Mac/Linux
浏览器: Chrome/Firefox/Safari

总体结果:  通过 /  失败

通过的测试: ____ / 24
失败的测试: ____ / 24

发现的问题:
1. ________________
2. ________________
3. ________________

建议改进:
1. ________________
2. ________________
```

---

##  测试完成标准

所有测试完成且满足以下条件：

 所有24个测试用例都通过
 没有JavaScript错误
 所有API调用返回正确的状态码
 用户提示信息清晰正确
 数据加载速度满足要求（<2秒）
 错误处理完善
 没有数据不一致

---

**测试状态**:  准备就绪
**下一步**: 开始执行测试
**预计耗时**: 30-60分钟







