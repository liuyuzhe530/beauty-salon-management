# AI 助手使用完整指南

## 概述

美容院管理系统集成了**智能 AI 助手**，可以帮助您：

✅ **实时数据分析** - 分析客户、预约、员工、销售数据  
✅ **智能建议** - 获取优化建议  
✅ **业务决策** - 基于数据的决策支持  
✅ **效率提升** - 自动化分析和建议  

---

## 快速开始

### 打开 AI 助手

1. 点击屏幕右下角的**蓝色按钮**（带 AI 图标）
2. 聊天窗口打开

### 提问示例

可以问 AI 助手：

- "帮我分析一下客户情况"
- "今天应该怎么排班？"
- "哪个时段预约最多？"
- "销售数据怎样？"
- "美容咨询：敏感肌肤护理方法"

---

## 功能详解

### 1. 通用聊天

**说什么：** 任何关于美容院运营的问题

**AI 回答：** 基于实时系统数据的专业建议

**示例对话：**
```
您: 我有多少个活跃客户？
AI: 根据系统数据分析，您目前有 45 名活跃客户。
   其中 8 名高风险客户需要关注...
```

### 2. 客户分析

**快速操作：** 点击"风险分析"

**AI 会：**
- 识别高风险客户（30 天未预约）
- 分析客户流失原因
- 提供留存策略

**示例：**
```
根据数据，王女士 35 天未预约，消费金额较高，
建议立即联系并提供特殊优惠...
```

### 3. 排班优化

**快速操作：** 点击"排班优化"

**AI 会：**
- 根据预约分析高峰时段
- 建议最优排班安排
- 预测成本节省

**示例：**
```
周一至周五 10:00-12:00 预约最多，建议李、王美容师
在这段时间排班。周末可保持现有安排...
```

### 4. 定价建议

**快速操作：** 点击"定价建议"

**AI 会：**
- 分析销售数据
- 建议服务定价
- 预测收入增长

**示例：**
```
面部护理（168 元）销量最好，建议保持。
深层清洁（128 元）可提升至 148 元，
预计增加 12% 收入...
```

### 5. 营销分析

**快速操作：** 点击"营销分析"

**AI 会：**
- 分析营销活动 ROI
- 推荐高效营销策略
- 预测转化率

**示例：**
```
社交媒体推广 ROI 最高（250%），
新客体验优惠转化率 22%。
建议继续加大这两项投入...
```

### 6. 智能建议

**快速操作：** 点击"智能建议"

**AI 会：**
- 综合分析所有数据
- 生成完整的运营建议报告
- 优先级排序

**示例：**
```
基于整体分析，建议优先处理：
1. 高风险客户流失（8 名客户需要立即跟进）
2. 周一预约不足（建议增加促销）
3. 产品销售季节性波动（需要优化库存）
...
```

---

## 工作原理

### 数据收集

AI 助手自动从系统收集：

- **客户数据**：总数、新增、流失率、VIP、高风险
- **预约数据**：月度、确认率、高峰时段、爽约率
- **员工数据**：人数、表现排行、满意度
- **销售数据**：收入、增长率、热销产品
- **营销数据**：活动 ROI、转化率

### 分析过程

```
系统数据 → 数据收集 → AI 分析 → 生成建议
```

1. **系统数据** - 从 localStorage 获取实时数据
2. **数据收集** - dataCollectorService 整理数据
3. **AI 分析** - GLM API 或演示模式分析
4. **生成建议** - 返回可操作的建议

---

## 两种工作模式

### 模式 1：API 模式（完整功能）

**需求：** 配置有效的 GLM API Key

**优点：**
- 基于 GLM 4.5-Flash 大模型
- 更智能、更有创意的回答
- 自然语言理解更强

**配置方法：**

在 `.env` 文件中添加：
```
VITE_GLM_API_KEY=你的API密钥
```

### 模式 2：演示模式（快速测试）

**特点：** 无需 API Key，立即可用

**优点：**
- 立即可用，无需配置
- 完整展示 AI 功能
- 完全离线运行

**工作方式：**
- 如果 API 连接失败，自动切换到演示模式
- 演示数据基于真实的业务场景
- 关键词匹配触发相应的建议

---

## 常见问题

### Q1：AI 为什么无法回答某些问题？

**原因：** 限制于美容院相关话题

AI 只回答：
- 美容行业相关问题 ✅
- 系统功能问题 ✅

不会回答：
- 数学、科学、历史等无关话题 ❌
- 政治、宗教等敏感话题 ❌

### Q2：演示模式和 API 模式有什么区别？

| 功能 | 演示模式 | API 模式 |
|------|--------|---------|
| 工作方式 | 关键词匹配 | 大模型 AI |
| 联网要求 | 不需要 | 需要 |
| 智能程度 | 预设回答 | 动态生成 |
| 反应速度 | 立即 | 1-3 秒 |
| 适用场景 | 快速演示 | 生产环境 |

### Q3：如何启用 API 模式？

1. 获取 GLM API Key（[申请地址](https://open.bigmodel.cn)）
2. 在项目根目录创建 `.env.local` 文件
3. 添加：`VITE_GLM_API_KEY=你的密钥`
4. 重启开发服务器：`npm run dev`
5. 重新打开 AI 助手

### Q4：为什么说我是演示模式？

**可能原因：**
1. 未配置 GLM API Key
2. API Key 无效或过期
3. 网络连接问题
4. GLM 服务暂时不可用

**解决方案：**
- 检查 API Key 是否正确配置
- 测试网络连接
- 刷新页面重试
- 或直接使用演示模式

### Q5：如何知道数据是否准确？

**数据来源验证：**
1. 进入相应模块查看原始数据
2. AI 分析基于实时系统数据
3. 可以在 localStorage 中查看原始数据

**在浏览器开发者工具中验证：**
```javascript
// 查看客户数据
localStorage.getItem('customers')

// 查看预约数据
localStorage.getItem('appointments')

// 查看员工数据
localStorage.getItem('staff')

// 查看产品数据
localStorage.getItem('products')
```

---

## 最佳实践

### 1. 具体的问题更有效

❌ **不好的问法：** "怎样？"  
✅ **好的问法：** "本月预约率是多少？有哪些高峰时段？"

### 2. 利用快速操作按钮

- 用于常见问题：风险分析、排班、定价
- 保存您的提问时间

### 3. 定期检查建议

- AI 分析基于当前数据
- 添加新客户或预约后刷新
- 系统数据更新后 AI 会给出新建议

### 4. 跟踪建议效果

- 记录 AI 建议
- 执行后观察结果
- 优化数据输入以改进建议

---

## 故障排除

### 问题：AI 一直在加载

**解决方案：**
1. 检查网络连接
2. 检查浏览器控制台是否有错误
3. 刷新页面
4. 清除缓存：`localStorage.clear()`

### 问题：得到错误信息

**检查列表：**
- [ ] 网络连接是否正常？
- [ ] GLM API Key 是否有效？
- [ ] 浏览器控制台有什么错误？
- [ ] 系统数据是否存在？

### 问题：回答不相关或不准确

**可能原因：**
1. 系统数据不完整
2. 问法不够具体
3. 使用的是演示模式

**改进方案：**
- 先添加一些示例数据
- 用更具体的问题
- 切换到 API 模式获得更准确的回答

---

## 隐私和安全

- 所有数据存储在浏览器本地
- API 请求采用 HTTPS 加密
- 不存储用户聊天历史到服务器
- 演示模式完全离线

---

## 高级功能

### 自定义系统提示

编辑 `src/services/aiService.ts` 中的 `systemPrompt` 变量来定制 AI 的行为。

### 添加新的快速操作

在 `AIChat.tsx` 中的 `handleQuickAction` 函数添加新的 case 分支。

### 扩展数据收集

在 `dataCollectorService.ts` 中添加新的数据收集方法。

---

## 更新日志

### v1.0
- 初始发布
- 基础聊天功能
- 5 个快速操作
- 演示模式和 API 模式

### v1.1
- 改进错误处理
- 添加数据摘要报告
- 增强演示模式

---

## 支持和反馈

如有问题或建议，请：
1. 检查本指南中的常见问题
2. 查看浏览器控制台的错误信息
3. 尝试切换到演示模式
4. 联系技术支持

---

祝您使用愉快！
